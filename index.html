
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Aditya Water</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      background: linear-gradient(to right, #dff6fd, #fdf5e6);
      margin: 0;
      padding: 20px;
    }
    h1 { font-size: 2em; margin-bottom: 0.3em; }
    .button-container { margin-bottom: 1em; }
    button {
      padding: 10px 20px;
      font-size: 16px;
      margin: 0 10px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      background-color: #008cff;
      color: white;
    }
    #gameArea {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 20px;
      margin-top: 20px;
    }
    .tube {
      width: 60px;
      height: 240px;
      border: 2px solid #333;
      border-radius: 12px;
      display: flex;
      flex-direction: column-reverse;
      overflow: hidden;
      background: white;
      cursor: pointer;
      position: relative;
    }
    .tube.selected { outline: 3px solid #ff9800; }
    .liquid { height: 25%; width: 100%; }
    .blue { background-color: #2196F3; }
    .red { background-color: #F44336; }
    .yellow { background-color: #FFEB3B; }
    .green { background-color: #4CAF50; }
  </style>
</head>
<body>
  <h1>üíß Aditya Water</h1>
  <h2>Level <span id="levelNum">1</span></h2>
  <div class="button-container">
    <button onclick="restartLevel()">üîÑ Restart</button>
    <button onclick="nextLevel()">‚è≠Ô∏è Next</button>
  </div>
  <div id="gameArea"></div>
  <script>
    let level = 1;
    const levelDisplay = document.getElementById("levelNum");
    const gameArea = document.getElementById("gameArea");
    const baseColors = ["blue", "red", "yellow", "green"];
    const tubeCapacity = 4;
    let tubes = [];
    let selectedTube = null;
    function shuffleArray(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }
    function generateLevel() {
      gameArea.innerHTML = "";
      tubes = [];
      selectedTube = null;
      const colorBalls = [];
      baseColors.forEach(color => {
        for (let i = 0; i < tubeCapacity; i++) {
          colorBalls.push(color);
        }
      });
      shuffleArray(colorBalls);
      for (let i = 0; i < baseColors.length; i++) {
        tubes.push(colorBalls.splice(0, tubeCapacity));
      }
      tubes.push([]);
      tubes.push([]);
      renderTubes();
    }
    function renderTubes() {
      gameArea.innerHTML = "";
      tubes.forEach((contents, index) => {
        const tube = document.createElement("div");
        tube.className = "tube";
        tube.dataset.index = index;
        if (selectedTube === index) {
          tube.classList.add("selected");
        }
        contents.forEach(color => {
          const liquid = document.createElement("div");
          liquid.className = `liquid ${color}`;
          tube.appendChild(liquid);
        });
        tube.addEventListener("click", () => handleTubeClick(index));
        gameArea.appendChild(tube);
      });
    }
    function handleTubeClick(index) {
      if (selectedTube === null) {
        if (tubes[index].length === 0) return;
        selectedTube = index;
      } else if (selectedTube === index) {
        selectedTube = null;
      } else {
        tryTransfer(selectedTube, index);
        selectedTube = null;
      }
      renderTubes();
      if (checkSolved()) {
        setTimeout(() => {
          nextLevel();
        }, 1000);
      }
    }
    function tryTransfer(from, to) {
      if (tubes[to].length >= tubeCapacity) return;
      const fromTube = tubes[from];
      const toTube = tubes[to];
      if (fromTube.length === 0) return;
      const colorToPour = fromTube[fromTube.length - 1];
      let count = 1;
      for (let i = fromTube.length - 2; i >= 0; i--) {
        if (fromTube[i] === colorToPour) count++;
        else break;
      }
      const spaceAvailable = tubeCapacity - toTube.length;
      if (toTube.length === 0 || toTube[toTube.length - 1] === colorToPour) {
        const pourCount = Math.min(count, spaceAvailable);
        for (let i = 0; i < pourCount; i++) {
          toTube.push(fromTube.pop());
        }
      }
    }
    function checkSolved() {
      return tubes.every(tube =>
        tube.length === 0 ||
        (tube.length === tubeCapacity && tube.every(color => color === tube[0]))
      );
    }
    function restartLevel() {
      generateLevel();
    }
    function nextLevel() {
      level++;
      levelDisplay.textContent = level;
      generateLevel();
    }
    generateLevel();
  </script>
</body>
</html>
